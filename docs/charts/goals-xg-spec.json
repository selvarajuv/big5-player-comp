{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "config": { "view": { "stroke": null } },
  "width": "container",
  "height": 400,
  "title": {
    "text": "Expected Goals vs Actual Goals",
    "subtitle": "Players above the diagonal are outperforming their expected goals",
    "color": "#e4e4e7",
    "subtitleColor": "#a1a1aa",
    "fontSize": 18,
    "subtitleFontSize": 14
  },
  "background": "transparent",
  "layer": [
    {
      "data": { "values": [{ "x": 0, "y": 0 }, { "x": 35, "y": 35 }] },
      "mark": { "type": "line", "strokeDash": [5, 5], "color": "#52525b" },
      "encoding": {
        "x": { "field": "x", "type": "quantitative" },
        "y": { "field": "y", "type": "quantitative" }
      }
    },
    {
      "data": { "values": [] },
      "params": [
        {
          "name": "legendSelect",
          "select": { "type": "point", "fields": ["performance"] },
          "bind": "legend"
        }
      ],
      "mark": { "type": "circle", "size": 300 },
      "encoding": {
        "x": {
          "field": "xG",
          "type": "quantitative",
          "title": "Expected Goals (xG)",
          "axis": {
            "labelColor": "#a1a1aa",
            "titleColor": "#e4e4e7",
            "gridColor": "#3f3f46",
            "labelFontSize": 14,
            "titleFontSize": 16
          }
        },
        "y": {
          "field": "goals",
          "type": "quantitative",
          "title": "Actual Goals",
          "axis": {
            "labelColor": "#a1a1aa",
            "titleColor": "#e4e4e7",
            "gridColor": "#3f3f46",
            "labelFontSize": 14,
            "titleFontSize": 16
          }
        },
        "color": {
          "condition": {
            "param": "legendSelect",
            "field": "performance",
            "type": "nominal",
            "scale": {
              "domain": ["Overperformer", "Average", "Underperformer"],
              "range": ["#10b981", "#3b82f6", "#ef4444"]
            },
            "legend": {
              "title": "Performance",
              "labelColor": "#e4e4e7",
              "titleColor": "#e4e4e7",
              "orient": "bottom",
              "labelFontSize": 16,
              "titleFontSize": 18,
              "symbolSize": 200
            }
          },
          "value": "#52525b"
        },
        "opacity": {
          "condition": { "param": "legendSelect", "value": 0.8 },
          "value": 0.15
        },
        "tooltip": [
          { "field": "name", "type": "nominal", "title": "Player" },
          { "field": "team", "type": "nominal", "title": "Team" },
          { "field": "league", "type": "nominal", "title": "League" },
          { "field": "goals", "type": "quantitative", "title": "Goals" },
          { "field": "xG", "type": "quantitative", "title": "xG", "format": ".1f" },
          { "field": "diff", "type": "quantitative", "title": "G-xG", "format": "+.1f" }
        ]
      }
    }
  ]
}
